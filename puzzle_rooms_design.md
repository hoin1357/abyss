# 퍼즐 룸 및 특수 방 설계 문서

## 개요

'심연의 탐험가' 게임에서 퍼즐 룸과 특수 방은 일반적인 전투 외에 추가적인 게임플레이 요소를 제공합니다. 이 문서는 게임에 등장하는 다양한 퍼즐 룸과 특수 방의 종류, 메커니즘, 보상 등을 상세히 설명합니다.

## 퍼즐 룸 시스템

### 퍼즐 룸 등장 방식

- 각 층마다 0~2개의 퍼즐 룸이 랜덤하게 생성됩니다.
- 퍼즐 룸은 일반적으로 특별한 문(색깔이 다른 문 또는 특수 심볼이 있는 문)으로 표시됩니다.
- 일부 퍼즐 룸은 숨겨져 있어 특정 조건을 만족해야 발견할 수 있습니다.
- 퍼즐 룸 클리어 시 특별한 보상(희귀 아이템, 스킬 포인트, 스탯 증가 등)을 얻을 수 있습니다.

### 퍼즐 룸 난이도

- 층이 깊어질수록 퍼즐의 난이도가 증가합니다.
- 난이도에 따라 보상의 가치도 증가합니다.
- 일부 퍼즐은 실패 시 페널티(체력 감소, 상태이상 등)가 있을 수 있습니다.

## 퍼즐 룸 종류

### 1. 압력판 퍼즐 (Pressure Plate Puzzle)

**설명**: 바닥에 여러 개의 압력판이 있으며, 특정 순서나 패턴으로 밟아야 합니다.

**메커니즘**:
- 압력판을 밟으면 색이 변하거나 소리가 납니다.
- 잘못된 순서로 밟으면 함정이 작동하거나 적이 소환됩니다.
- 정확한 순서는 주변 벽의 그림이나 바닥의 패턴으로 힌트가 제공됩니다.

**난이도 변화**:
- 쉬움: 3-4개의 압력판, 명확한 힌트
- 보통: 5-6개의 압력판, 간접적인 힌트
- 어려움: 7-8개의 압력판, 모호한 힌트, 시간 제한

**보상**: 
- 쉬움: 고급 아이템 1개
- 보통: 희귀 아이템 1개 또는 스탯 증가
- 어려움: 영웅급 아이템 확률 또는 스킬 포인트

### 2. 거울 퍼즐 (Mirror Puzzle)

**설명**: 방 안에 여러 개의 거울과 빛의 원천이 있으며, 거울을 조작하여 빛을 특정 대상에 반사시켜야 합니다.

**메커니즘**:
- 플레이어는 거울을 회전시킬 수 있습니다.
- 빛은 거울에 반사되어 방향이 바뀝니다.
- 모든 대상(수정, 센서 등)에 빛을 비추면 퍼즐이 해결됩니다.

**난이도 변화**:
- 쉬움: 2-3개의 거울, 단일 빛 경로
- 보통: 4-5개의 거울, 다중 빛 경로
- 어려움: 6개 이상의 거울, 색깔 빛 조합, 이동하는 장애물

**보상**:
- 쉬움: 마나 포션 및 고급 아이템
- 보통: 희귀 아이템 또는 속성 저항 증가
- 어려움: 영웅급 아이템 확률 또는 특수 능력

### 3. 상자 밀기 퍼즐 (Box Pushing Puzzle)

**설명**: 방 안에 여러 개의 상자가 있으며, 이를 특정 위치로 밀어 넣어야 합니다.

**메커니즘**:
- 플레이어는 상자를 한 방향으로만 밀 수 있습니다.
- 상자는 다른 상자나 벽에 닿으면 더 이상 움직일 수 없습니다.
- 모든 상자를 지정된 위치(바닥의 표시)에 놓으면 퍼즐이 해결됩니다.

**난이도 변화**:
- 쉬움: 2-3개의 상자, 넓은 공간
- 보통: 4-5개의 상자, 제한된 공간
- 어려움: 6개 이상의 상자, 복잡한 레이아웃, 함정

**보상**:
- 쉬움: 체력 포션 및 고급 아이템
- 보통: 희귀 아이템 또는 방어력 증가
- 어려움: 영웅급 아이템 확률 또는 인벤토리 확장

### 4. 순서 퍼즐 (Sequence Puzzle)

**설명**: 방 안에 여러 개의 심볼이나 오브젝트가 있으며, 특정 순서대로 활성화해야 합니다.

**메커니즘**:
- 각 심볼을 클릭하거나 상호작용하면 활성화됩니다.
- 잘못된 순서로 활성화하면 퍼즐이 리셋되거나 페널티가 발생합니다.
- 순서에 대한 힌트는 주변 환경이나 이전 방에서 찾을 수 있습니다.

**난이도 변화**:
- 쉬움: 3-4개의 심볼, 명확한 힌트
- 보통: 5-6개의 심볼, 간접적인 힌트
- 어려움: 7-8개의 심볼, 모호한 힌트, 시간 제한

**보상**:
- 쉬움: 스크롤 및 고급 아이템
- 보통: 희귀 아이템 또는 최대 체력 증가
- 어려움: 영웅급 아이템 확률 또는 특수 스킬

### 5. 원소 퍼즐 (Elemental Puzzle)

**설명**: 방 안에 여러 원소(불, 물, 번개 등)와 관련된 장치가 있으며, 이를 올바르게 조합해야 합니다.

**메커니즘**:
- 플레이어는 원소 장치를 활성화하거나 비활성화할 수 있습니다.
- 특정 원소 조합이 다른 장치에 영향을 미칩니다.
- 모든 장치를 올바른 상태로 만들면 퍼즐이 해결됩니다.

**난이도 변화**:
- 쉬움: 2-3개의 원소, 단순한 조합
- 보통: 4-5개의 원소, 복잡한 상호작용
- 어려움: 모든 원소 사용, 시간 제한, 환경 변화

**보상**:
- 쉬움: 원소 저항 포션 및 고급 아이템
- 보통: 희귀 아이템 또는 원소 친화력 증가
- 어려움: 영웅급 아이템 확률 또는 원소 마스터리

## 특수 방 종류

### 1. 제단 방 (Altar Room)

**설명**: 신비로운 제단이 있는 방으로, 희생을 통해 축복을 받을 수 있습니다.

**메커니즘**:
- 플레이어는 체력, 골드, 아이템 등을 제단에 바칠 수 있습니다.
- 희생의 가치에 따라 다양한 축복(스탯 증가, 특수 능력, 아이템 등)을 받습니다.
- 일부 제단은 특정 조건(특정 직업, 특정 아이템 소지 등)에서만 사용 가능합니다.

**종류**:
- 체력 제단: 체력을 바쳐 영구적인 스탯 증가
- 골드 제단: 골드를 바쳐 특수 아이템 획득
- 아이템 제단: 아이템을 바쳐 더 강력한 아이템 획득
- 저주 제단: 저주를 받는 대신 강력한 능력 획득

### 2. 상점 방 (Shop Room)

**설명**: NPC 상인이 있는 방으로, 아이템을 구매하거나 판매할 수 있습니다.

**메커니즘**:
- 상인은 다양한 아이템을 판매합니다.
- 플레이어는 골드를 사용하여 아이템을 구매하거나, 아이템을 판매하여 골드를 얻을 수 있습니다.
- 일부 상인은 특별한 거래(아이템 교환, 강화 서비스 등)를 제공합니다.

**종류**:
- 일반 상점: 다양한 일반 아이템 판매
- 무기 상점: 무기 전문 판매
- 방어구 상점: 방어구 전문 판매
- 마법 상점: 마법 아이템 및 스크롤 판매
- 비밀 상점: 희귀 아이템 판매 (특정 조건에서만 등장)

### 3. 휴식 방 (Rest Room)

**설명**: 안전한 휴식 공간으로, 체력과 마나를 회복하고 상태이상을 치유할 수 있습니다.

**메커니즘**:
- 플레이어는 이 방에서 휴식을 취할 수 있습니다.
- 휴식을 취하면 체력과 마나가 회복되고, 상태이상이 제거됩니다.
- 일부 휴식 방은 추가 혜택(임시 버프, 스킬 재사용 대기시간 초기화 등)을 제공합니다.

**종류**:
- 샘: 체력과 마나 회복
- 캠프파이어: 휴식 및 임시 버프
- 신성한 공간: 모든 상태이상 치유 및 축복
- 명상실: 스킬 재사용 대기시간 초기화 및 마나 회복

### 4. 도전 방 (Challenge Room)

**설명**: 특별한 도전이 있는 방으로, 성공 시 높은 보상을 얻을 수 있습니다.

**메커니즘**:
- 플레이어는 특정 조건(시간 제한, 특정 무기만 사용, 체력 제한 등)에서 도전을 완료해야 합니다.
- 도전 성공 시 높은 가치의 보상을 얻습니다.
- 도전 실패 시 일부 페널티가 발생할 수 있습니다.

**종류**:
- 전투 도전: 특정 조건에서 적 처치
- 생존 도전: 시간 동안 생존
- 수집 도전: 제한 시간 내 아이템 수집
- 회피 도전: 피해 없이 목표 지점 도달

### 5. 비밀 방 (Secret Room)

**설명**: 숨겨진 방으로, 특별한 보상이나 비밀 정보를 얻을 수 있습니다.

**메커니즘**:
- 비밀 방은 일반적으로 숨겨진 입구(가짜 벽, 숨겨진 스위치 등)를 통해 접근합니다.
- 비밀 방에는 희귀 아이템, 특수 NPC, 게임 세계관 관련 정보 등이 있을 수 있습니다.
- 일부 비밀 방은 특정 조건(특정 아이템 소지, 특정 스킬 사용 등)에서만 발견할 수 있습니다.

**종류**:
- 보물 방: 희귀 아이템 및 골드
- 기록 방: 게임 세계관 및 힌트
- NPC 은신처: 특별한 NPC와 상호작용
- 포탈 방: 다른 층으로 이동 가능한 포탈

## 층별 특수 방 분포

### 하수도 (1-3층)

1. **정화 제단 (2층)**
   - **설명**: 오염된 하수도의 물을 정화하는 제단
   - **메커니즘**: 정화 크리스탈을 제단에 바치면 주변 물이 정화되고, 숨겨진 통로가 열립니다.
   - **보상**: 정화된 물에서 특별한 아이템 발견, 하수도 관리인 NPC 퀘스트 진행

2. **쥐 둥지 도전 (3층)**
   - **설명**: 수많은 쥐가 서식하는 방
   - **메커니즘**: 30초 내에 모든 쥐를 처치해야 합니다.
   - **보상**: 쥐 왕의 보물 (희귀 아이템, 골드)

3. **도둑의 은신처 (1-3층)**
   - **설명**: 하수도에 숨어 사는 도둑의 비밀 방
   - **메커니즘**: 특정 벽을 조사하거나, 도둑 NPC의 힌트를 따라 발견할 수 있습니다.
   - **보상**: 훔친 물건 (다양한 아이템), 도둑 NPC 퀘스트

### 광산 (3-6층)

1. **크리스탈 퍼즐 방 (4층)**
   - **설명**: 다양한 색상의 크리스탈이 있는 방
   - **메커니즘**: 크리스탈을 특정 순서로 활성화하여 중앙의 큰 크리스탈을 활성화해야 합니다.
   - **보상**: 크리스탈 무기 또는 방어구 (원소 속성 부여)

2. **광부의 휴게실 (5층)**
   - **설명**: 광부들이 휴식을 취하던 방
   - **메커니즘**: 캠프파이어에서 휴식을 취하면 체력과 마나가 회복되고, 임시 채광 버프를 받습니다.
   - **보상**: 체력/마나 회복, 광석 발견 확률 증가 버프

3. **발명가의 작업실 (6층)**
   - **설명**: 기계 장치와 도구가 가득한 방
   - **메커니즘**: 발명가 NPC가 특별한 아이템을 제작해주거나, 퀘스트를 제공합니다.
   - **보상**: 특수 장비 제작, 발명가 NPC 퀘스트

### 신비한 심해 (7-9층)

1. **물의 신전 (7층)**
   - **설명**: 물의 신을 모시는 신전
   - **메커니즘**: 물의 제단에 희생을 바치면 물 속성 관련 축복을 받습니다.
   - **보상**: 물 속성 저항 증가, 물 속성 무기 강화, 수중 호흡 능력

2. **심해 생물 연구실 (8층)**
   - **설명**: 심해 생물을 연구하던 방
   - **메커니즘**: 연구 자료를 수집하여 연구원 NPC에게 전달하는 퀘스트
   - **보상**: 심해 생물에 대한 지식 (약점 파악), 연구원 NPC 퀘스트

3. **압력 퍼즐 방 (9층)**
   - **설명**: 수압을 이용한 퍼즐이 있는 방
   - **메커니즘**: 밸브를 조작하여 물의 흐름을 제어하고, 특정 장치를 작동시켜야 합니다.
   - **보상**: 심해의 보물 (희귀/영웅급 아이템)

### 최종 심연 (10층)

1. **심연의 제단 (10층)**
   - **설명**: 심연의 힘이 집중된 제단
   - **메커니즘**: 이전 층에서 수집한 특수 아이템을 제단에 바쳐야 최종 보스 방으로 가는 문이 열립니다.
   - **보상**: 최종 보스 방 입장 권한

2. **고대 도서관 (10층)**
   - **설명**: 잊혀진 지식이 보관된 도서관
   - **메커니즘**: 고대 문서를 해독하여 최종 보스의 약점을 알아낼 수 있습니다.
   - **보상**: 최종 보스 약점 정보, 특수 스킬 획득

## 퍼즐 룸 구현 가이드라인

### 시각적 표현

- 각 퍼즐 요소는 명확하게 구분되는 시각적 디자인을 가져야 합니다.
- 활성화/비활성화 상태가 시각적으로 명확히 표현되어야 합니다.
- 퍼즐의 진행 상태를 보여주는 시각적 피드백이 있어야 합니다.

### 상호작용 방식

- 플레이어는 키보드 방향키 또는 마우스 클릭으로 퍼즐 요소와 상호작용할 수 있습니다.
- 상호작용 가능한 요소는 마우스 오버 시 하이라이트되어야 합니다.
- 퍼즐 요소 조작 시 시각적/청각적 피드백이 제공되어야 합니다.

### 힌트 시스템

- 퍼즐의 난이도에 따라 적절한 힌트가 제공되어야 합니다.
- 힌트는 환경(벽화, 바닥 패턴 등) 또는 아이템(메모, 책 등)을 통해 제공될 수 있습니다.
- 플레이어가 오랜 시간 퍼즐을 해결하지 못할 경우, 추가 힌트가 제공될 수 있습니다.

### 보상 시스템

- 퍼즐 해결 시 즉각적인 보상 피드백(빛 효과, 소리 등)이 있어야 합니다.
- 보상은 퍼즐의 난이도와 층에 비례하여 가치가 결정됩니다.
- 보상은 상자 출현, 벽 개방, NPC 등장 등 다양한 방식으로 제공될 수 있습니다.

## 특수 방 구현 가이드라인

### NPC 상호작용

- NPC와의 대화는 대화 시스템을 통해 이루어집니다.
- NPC는 플레이어의 선택에 따라 다양한 반응과 결과를 제공합니다.
- 일부 NPC는 플레이어의 직업, 소지 아이템, 이전 선택 등에 따라 다른 대화 옵션을 제공합니다.

### 상점 시스템

- 상점 NPC는 아이템 구매/판매 인터페이스를 제공합니다.
- 아이템 가격은 기본 가치, 희귀도, 플레이어의 거래 스킬 등에 따라 결정됩니다.
- 특정 조건(퀘스트 완료, 특정 아이템 소지 등)에서 특별한 아이템이 판매될 수 있습니다.

### 제단 시스템

- 제단은 플레이어가 희생을 바치고 보상을 받는 인터페이스를 제공합니다.
- 희생의 종류와 가치에 따라 다양한 보상이 결정됩니다.
- 일부 제단은 특정 조건(특정 직업, 특정 아이템 소지 등)에서만 사용 가능합니다.

### 도전 시스템

- 도전 방에 입장 시 도전 조건과 보상이 표시됩니다.
- 도전 진행 상황(남은 시간, 처치한 적 수 등)이 UI에 표시됩니다.
- 도전 성공/실패 시 명확한 피드백과 결과가 제공됩니다.

## 결론

퍼즐 룸과 특수 방은 '심연의 탐험가' 게임에 다양성과 깊이를 더하는 중요한 요소입니다. 전투 외에도 플레이어의 지능, 관찰력, 문제 해결 능력을 시험하는 콘텐츠를 제공하여 게임 경험을 풍부하게 만듭니다. 각 층별 특성에 맞는 퍼즐과 특수 방을 배치하여 게임의 세계관과 이야기를 더욱 강화하고, 플레이어에게 다양한 도전과 보상을 제공합니다.
